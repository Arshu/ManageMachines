<script>

    function flySetAppName(flyName) {
        triggerEvent('appInfoResetButton', 'click');
        getElm('flyAppName').value = flyName;
    }

    function resetInfo(flyDNSAppSelectElmId, flyAppNameElmId, flyAppIP4AddressElmId, flyAppIP6AddressElmId,
        flyCreateAppBtnElmId, flyAllocateAppIPBtnElmId, flyReleaseAppIPBtnElmId, flyDeleteAppBtnElmId, nextCallback) {

        hideElm('flyLoginUrlDiv');

        getElm(flyDNSAppSelectElmId).selectedIndex = 0;
        getElm(flyAppNameElmId).value = "";
        getElm(flyAppIP4AddressElmId).value = "";
        getElm(flyAppIP6AddressElmId).value = "";

        //getElm(flyCreateAppBtnElmId).setAttribute('disabled', true);
        getElm(flyAllocateAppIPBtnElmId).setAttribute('disabled', true);
        getElm(flyReleaseAppIPBtnElmId).setAttribute('disabled', true);
        getElm(flyDeleteAppBtnElmId).setAttribute('disabled', true);

        if (typeof nextCallback === "function") {
            nextCallback();
        }
    }

    function resetAppInfo(flyDNSAppSelectElmId, flyAppNameElmId, flyAppIP4AddressElmId, flyAppIP6AddressElmId,
        flyCreateAppBtnElmId, flyAllocateAppIPBtnElmId, flyReleaseAppIPBtnElmId, flyDeleteAppBtnElmId, nextCallback) {

        hideElm('flyLoginUrlDiv');

        getElm(flyAppIP4AddressElmId).value = "";
        getElm(flyAppIP6AddressElmId).value = "";

        //getElm(flyCreateAppBtnElmId).setAttribute('disabled', true);
        getElm(flyAllocateAppIPBtnElmId).setAttribute('disabled', true);
        getElm(flyReleaseAppIPBtnElmId).setAttribute('disabled', true);
        getElm(flyDeleteAppBtnElmId).setAttribute('disabled', true);

        if (typeof nextCallback === "function") {
            nextCallback();
        }
    }

    function resetAppIPInfo(flyDNSAppSelectElmId, flyAppNameElmId, flyAppIP4AddressElmId, flyAppIP6AddressElmId,
        flyCreateAppBtnElmId, flyAllocateAppIPBtnElmId, flyReleaseAppIPBtnElmId, flyDeleteAppBtnElmId, nextCallback) {

        hideElm('flyLoginUrlDiv');

        getElm(flyAppIP4AddressElmId).value = "";
        getElm(flyAppIP6AddressElmId).value = "";

        //getElm(flyCreateAppBtnElmId).setAttribute('disabled', true);
        getElm(flyAllocateAppIPBtnElmId).setAttribute('disabled', true);
        getElm(flyReleaseAppIPBtnElmId).setAttribute('disabled', true);

        if (typeof nextCallback === "function") {
            nextCallback();
        }
    }

    function flyGetAppInfo(progressElmId, responseElmId, authTokenVal, appNameVal, appNameTargetId, appOrgTargetId, flyCreateAppBtnElmId, flyAllocateAppIPBtnElmId, flyReleaseAppIPBtnElmId, flyDeleteAppBtnElmId, successCallback) {

        var id = window.ajaxid++;
        var responseElm = getElm(responseElmId);
        var responseContainerElmId = responseElmId + "Container";
        responseElm.textContent = '';
        hideElm(responseContainerElmId);
        var valid = true;

        if (valid == true) {
            if (appNameVal.trim().length === 0) {
                showText(responseElm, 'Enter App Name', 'red');
                valid = false;
            }
        }
        //getElm(flyCreateAppBtnElmId).setAttribute("disabled", true);
        getElm(flyAllocateAppIPBtnElmId).setAttribute("disabled", true);
        getElm(flyReleaseAppIPBtnElmId).setAttribute("disabled", true);
        getElm(flyDeleteAppBtnElmId).setAttribute("disabled", true);

        if (valid === true) {

            let url = '/AppApi/FlyApi';
            let urlMethod = 'POST';
            let urlContent = {
                "jsonrpc": '2.0', "method": 'GetAppInfo', "params": {
                    "fly_api_token": authTokenVal,
                    "app_name": appNameVal
                }, "id": id
            };

            dopost(progressElmId, responseElmId, url, urlContent,
                function (data) {
                    if (data.hasOwnProperty('Result') === true) {
                        var result = data.Result;

                        if (result.hasOwnProperty('message') === true) {
                            showText(responseElm, result.message, 'green');

                            getElm(flyDeleteAppBtnElmId).removeAttribute("disabled");

                            if (result.hasOwnProperty('json') === true) {
                                var appInfo = result.json;
                                if (appInfo.hasOwnProperty('organization') === true) {
                                    var orgInfo = appInfo.organization;
                                    for (var key in orgInfo) {
                                        if (key == "slug") {
                                            getElm(appOrgTargetId).value = orgInfo[key];
                                        }
                                    }
                                }
                            }

                            if (typeof successCallback === "function") {
                                successCallback();
                            }
                        }
                        else if (result.hasOwnProperty('error') === true) {
                            showText(responseElm, result.error, 'red');

                            getElm(flyCreateAppBtnElmId).removeAttribute("disabled");
                        }
                    }
                    else if ((data.hasOwnProperty('Error') === true) && (data.Error)) {
                        var error = data.Error;
                        if (error.hasOwnProperty('Message') === true) {
                            showText(responseElm, error.Message, 'red');
                        }
                    }
                },
                function (data) {
                    if ((data.hasOwnProperty('Error') === true) && (data.Error)) {
                        var result = data.Error;
                        if (result.hasOwnProperty('Message') === true) {
                            showText(responseElm, result.Message, 'red');
                        }
                    }
                    else if (data.hasOwnProperty('Result') === true) {
                        var result = data.Result;
                        if (result.hasOwnProperty('error') === true) {
                            showText(responseElm, result.error, 'red');
                            getElm(flyCreateAppBtnElmId).removeAttribute("disabled");
                        }
                    }
                }
            );
        }
    }

    function flyGetAppIPInfo(progressElmId, responseElmId, authTokenVal, appNameVal, appIP4TargetId, appIP6TargetId, flyCreateAppBtnElmId, flyAllocateAppIPBtnElmId, flyReleaseAppIPBtnElmId, flyDeleteAppBtnElmId, successCallback) {

        var id = window.ajaxid++;
        var responseElm = getElm(responseElmId);
        var responseContainerElmId = responseElmId + "Container";
        responseElm.textContent = '';
        hideElm(responseContainerElmId);
        var valid = true;

        if (valid == true) {
            if (appNameVal.trim().length === 0) {
                showText(responseElm, 'Enter App Name', 'red');
                valid = false;
            }
        }

        if (valid == true) {
            if (appIP4TargetId.trim().length === 0) {
                showText(responseElm, 'IP4 Target ID is Empty', 'red');
                valid = false;
            }
        }

        if (valid == true) {
            if (appIP6TargetId.trim().length === 0) {
                showText(responseElm, 'IP6 Target ID is Empty', 'red');
                valid = false;
            }
        }

        //getElm(flyCreateAppBtnElmId).setAttribute("disabled", true);
        getElm(flyAllocateAppIPBtnElmId).setAttribute("disabled", true);
        getElm(flyReleaseAppIPBtnElmId).setAttribute("disabled", true);

        if (valid === true) {

            let url = '/AppApi/FlyApi';
            let urlMethod = 'POST';
            let urlContent = {
                "jsonrpc": '2.0', "method": 'GetAppIPInfo', "params": {
                    "fly_api_token": authTokenVal,
                    "app_name": appNameVal
                }, "id": id
            };

            dopost(progressElmId, responseElmId, url, urlContent,
                function (data) {
                    if (data.hasOwnProperty('Result') === true) {
                        var result = data.Result;

                        if (result.hasOwnProperty('message') === true) {
                            //showText(responseElm, result.message, 'green');
                            var ip4Allocated = false;
                            var ip6Allocated = false;
                            if (result.hasOwnProperty('json') === true) {
                                var ipInfo = result.json;
                                for (var key in ipInfo) {
                                    if (key == "v4") {
                                        getElm(appIP4TargetId).value = ipInfo[key];
                                        ip4Allocated = true;
                                    }
                                    else if (key == "v6") {
                                        getElm(appIP6TargetId).value = ipInfo[key];
                                        ip6Allocated = true;
                                    }
                                }
                            }

                            getElm(flyReleaseAppIPBtnElmId).removeAttribute("disabled");
                            getElm(flyDeleteAppBtnElmId).removeAttribute("disabled");
                            if ((ip4Allocated == false) && (ip6Allocated == true)) {
                                getElm(flyAllocateAppIPBtnElmId).removeAttribute("disabled");
                            }
                            else if ((ip4Allocated == true) && (ip6Allocated == false)) {
                                getElm(flyAllocateAppIPBtnElmId).removeAttribute("disabled");
                            }

                            if (typeof successCallback === "function") {
                                successCallback();
                            }
                        }
                        else if (result.hasOwnProperty('error') === true) {
                            showText(responseElm, result.error, 'red');
                        }
                    }
                    else if ((data.hasOwnProperty('Error') === true) && (data.Error)) {
                        var error = data.Error;
                        if (error.hasOwnProperty('Message') === true) {
                            showText(responseElm, error.Message, 'red');
                        }
                    }
                },
                function (data) {
                    if ((data.hasOwnProperty('Error') === true) && (data.Error)) {
                        var result = data.Error;
                        if (result.hasOwnProperty('Message') === true) {
                            showText(responseElm, result.Message, 'red');
                        }
                    }
                    else if (data.hasOwnProperty('Result') === true) {
                        var result = data.Result;
                        if (result.hasOwnProperty('error') === true) {
                            showText(responseElm, result.error, 'red');
                            getElm(flyAllocateAppIPBtnElmId).removeAttribute("disabled");
                        }
                    }
                }
            );
        }
    }

    function flyCreateApp(progressElmId, responseElmId, authTokenVal, orgSlugVal, appNameVal, appNetworkVal, successCallback) {

        var id = window.ajaxid++;
        var responseElm = getElm(responseElmId);
        var responseContainerElmId = responseElmId + "Container";
        responseElm.textContent = '';
        hideElm(responseContainerElmId);
        var valid = true;

        if (valid == true) {
            if (orgSlugVal.trim().length === 0) {
                showText(responseElm, 'Select Org Slug', 'red');
                valid = false;
            }
        }

        if (valid == true) {
            if (appNameVal.trim().length === 0) {
                showText(responseElm, 'Enter App Name', 'red');
                valid = false;
            }
        }
       
        if (valid === true) {

            let url = '/AppApi/FlyApi';
            let urlMethod = 'POST';
            let urlContent = {
                "jsonrpc": '2.0', "method": 'CreateApp', "params": {
                    "fly_api_token": authTokenVal,
                    "org_slug": orgSlugVal,
                    "app_name": appNameVal,
                    "app_network": appNetworkVal,
                }, "id": id
            };

            dopost(progressElmId, responseElmId, url, urlContent,
                function (data) {
                    if (data.hasOwnProperty('Result') === true) {
                        var result = data.Result;

                        if (result.hasOwnProperty('message') === true) {
                            showText(responseElm, result.message, 'green');

                            if (typeof successCallback === "function") {
                                successCallback();
                            }
                        }
                        else if (result.hasOwnProperty('error') === true) {
                            showText(responseElm, result.error, 'red');
                        }
                    }
                    else if ((data.hasOwnProperty('Error') === true) && (data.Error)) {
                        var error = data.Error;
                        if (error.hasOwnProperty('Message') === true) {
                            showText(responseElm, error.Message, 'red');
                        }
                    }
                },
                function (data) {
                    if ((data.hasOwnProperty('Error') === true) && (data.Error)) {
                        var result = data.Error;
                        if (result.hasOwnProperty('Message') === true) {
                            showText(responseElm, result.Message, 'red');
                        }
                    }
                    else if (data.hasOwnProperty('Result') === true) {
                        var result = data.Result;
                        if (result.hasOwnProperty('error') === true) {
                            showText(responseElm, result.error, 'red');
                        }
                    }
                });
        }
    }

    function flyDeleteApp(progressElmId, responseElmId, authTokenVal, appNameVal, successCallback) {

        var id = window.ajaxid++;
        var responseElm = getElm(responseElmId);
        var responseContainerElmId = responseElmId + "Container";
        responseElm.textContent = '';
        hideElm(responseContainerElmId);
        var valid = true;

        if (valid == true) {
            if (appNameVal.trim().length === 0) {
                showText(responseElm, 'Enter App Name', 'red');
                valid = false;
            }
        }

        if (valid === true) {

            let url = '/AppApi/FlyApi';
            let urlMethod = 'POST';
            let urlContent = {
                "jsonrpc": '2.0', "method": 'DeleteApp', "params": {
                    "fly_api_token": authTokenVal,
                    "app_name": appNameVal
                }, "id": id
            };

            dopost(progressElmId, responseElmId, url, urlContent,
                function (data) {
                    if (data.hasOwnProperty('Result') === true) {
                        var result = data.Result;

                        if (result.hasOwnProperty('message') === true) {
                            showText(responseElm, result.message, 'green');

                            if (typeof successCallback === "function") {
                                successCallback();
                            }
                        }
                        else if (result.hasOwnProperty('error') === true) {
                            showText(responseElm, result.error, 'red');
                        }
                    }
                    else if ((data.hasOwnProperty('Error') === true) && (data.Error)) {
                        var error = data.Error;
                        if (error.hasOwnProperty('Message') === true) {
                            showText(responseElm, error.Message, 'red');
                        }
                    }
                },
                function (data) {
                    if ((data.hasOwnProperty('Error') === true) && (data.Error)) {
                        var result = data.Error;
                        if (result.hasOwnProperty('Message') === true) {
                            showText(responseElm, result.Message, 'red');
                        }
                    }
                    else if (data.hasOwnProperty('Result') === true) {
                        var result = data.Result;
                        if (result.hasOwnProperty('error') === true) {
                            showText(responseElm, result.error, 'red');
                        }
                    }
                });
        }
    }

    function flyAllocateAppIP(progressElmId, responseElmId, authTokenVal, appNameVal, ip4AddressVal, ip6AddressVal, allocateIP6Val, successCallback) {

        var id = window.ajaxid++;
        var responseElm = getElm(responseElmId);
        var responseContainerElmId = responseElmId + "Container";
        responseElm.textContent = '';
        hideElm(responseContainerElmId);
        var valid = true;

        if (valid == true) {
            if (appNameVal.trim().length === 0) {
                showText(responseElm, 'Enter App Name', 'red');
                valid = false;
            }
        }

        if (valid == true) {
            if (allocateIP6Val == true) {
                if (ip6AddressVal.trim().length > 0) {
                    showText(responseElm, 'IP6 Address is already allocated', 'red');
                    valid = false;
                }
            } else {
                if (ip4AddressVal.trim().length > 0) {
                    showText(responseElm, 'IP4 Address is already allocated', 'red');
                    valid = false;
                }
            }
        }

        if (valid === true) {

            let url = '/AppApi/FlyApi';
            let urlMethod = 'POST';
            let urlContent = {
                "jsonrpc": '2.0', "method": 'AllocateAppIP', "params": {
                    "fly_api_token": authTokenVal,
                    "app_name": appNameVal,
                    "allocateIP6": allocateIP6Val
                }, "id": id
            };

            dopost(progressElmId, responseElmId, url, urlContent,
                function (data) {
                    if (data.hasOwnProperty('Result') === true) {
                        var result = data.Result;

                        if (result.hasOwnProperty('message') === true) {
                            showText(responseElm, result.message, 'green');

                            if (typeof successCallback === "function") {
                                successCallback();
                            }
                        }
                        else if (result.hasOwnProperty('error') === true) {
                            showText(responseElm, result.error, 'red');
                        }
                    }
                    else if ((data.hasOwnProperty('Error') === true) && (data.Error)) {
                        var error = data.Error;
                        if (error.hasOwnProperty('Message') === true) {
                            showText(responseElm, error.Message, 'red');
                        }
                    }
                },
                function (data) {
                    if ((data.hasOwnProperty('Error') === true) && (data.Error)) {
                        var result = data.Error;
                        if (result.hasOwnProperty('Message') === true) {
                            showText(responseElm, result.Message, 'red');
                        }
                    }
                    else if (data.hasOwnProperty('Result') === true) {
                        var result = data.Result;
                        if (result.hasOwnProperty('error') === true) {
                            showText(responseElm, result.error, 'red');
                        }
                    }
                });
        }
    }

    function flyReleaseAppIP(progressElmId, responseElmId, authTokenVal, appNameVal, ip4AddressVal, ip6AddressVal, allocateIP6Val, successCallback) {

        var id = window.ajaxid++;
        var responseElm = getElm(responseElmId);
        var responseContainerElmId = responseElmId + "Container";
        responseElm.textContent = '';
        hideElm(responseContainerElmId);
        var valid = true;

        if (valid == true) {
            if (appNameVal.trim().length === 0) {
                showText(responseElm, 'Enter App Name', 'red');
                valid = false;
            }
        }

        if (valid == true) {
            if (allocateIP6Val == true) {
                if (ip6AddressVal.trim().length === 0) {
                    showText(responseElm, 'IP6 Address is Empty', 'red');
                    valid = false;
                }
            } else {
                if (ip4AddressVal.trim().length === 0) {
                    showText(responseElm, 'IP4 Address is Empty', 'red');
                    valid = false;
                }
            }
        }
        var ipAddressVal = ip4AddressVal;
        if (allocateIP6Val == true) ipAddressVal = ip6AddressVal;

        if (valid === true) {
            let url = '/AppApi/FlyApi';
            let urlMethod = 'POST';
            let urlContent = {
                "jsonrpc": '2.0', "method": 'ReleaseAppIP', "params": {
                    "fly_api_token": authTokenVal,
                    "app_name": appNameVal,
                    "ipAddress": ipAddressVal
                }, "id": id
            };

            dopost(progressElmId, responseElmId, url, urlContent,
                function (data) {
                    if (data.hasOwnProperty('Result') === true) {
                        var result = data.Result;

                        if (result.hasOwnProperty('message') === true) {
                            showText(responseElm, result.message, 'green');

                            if (typeof successCallback === "function") {
                                successCallback();
                            }
                        }
                        else if (result.hasOwnProperty('error') === true) {
                            showText(responseElm, result.error, 'red');
                        }
                    }
                    else if ((data.hasOwnProperty('Error') === true) && (data.Error)) {
                        var error = data.Error;
                        if (error.hasOwnProperty('Message') === true) {
                            showText(responseElm, error.Message, 'red');
                        }
                    }
                },
                function (data) {
                    if ((data.hasOwnProperty('Error') === true) && (data.Error)) {
                        var result = data.Error;
                        if (result.hasOwnProperty('Message') === true) {
                            showText(responseElm, result.Message, 'red');
                        }
                    }
                    else if (data.hasOwnProperty('Result') === true) {
                        var result = data.Result;
                        if (result.hasOwnProperty('error') === true) {
                            showText(responseElm, result.error, 'red');
                        }
                    }
                });
        }
    }

    function flySetAppSecret(progressElmId, responseElmId, authTokenVal, appNameVal, appSecretVal, actionBtnElmId, successCallback) {

        var id = window.ajaxid++;
        var responseElm = getElm(responseElmId);
        var responseContainerElmId = responseElmId + "Container";
        responseElm.textContent = '';
        hideElm(responseContainerElmId);
        var valid = true;

        if (valid == true) {
            if (appNameVal.trim().length === 0) {
                showText(responseElm, 'Enter App Name', 'red');
                valid = false;
            }
        }

        if (valid == true) {
            if (appSecretVal.trim().length === 0) {
                showText(responseElm, 'Enter App Secret', 'red');
                valid = false;
            }
        }

        if (valid === true) {

            let url = '/AppApi/FlyApi';
            let urlMethod = 'POST';
            let urlContent = {
                "jsonrpc": '2.0', "method": 'SetAppSecret', "params": {
                    "fly_api_token": authTokenVal,
                    "app_name": appNameVal,
                    "app_secret": appSecretVal
                }, "id": id
            };

            dopost(progressElmId, responseElmId, url, urlContent,
                function (data) {
                    if (data.hasOwnProperty('Result') === true) {
                        var result = data.Result;

                        if (result.hasOwnProperty('message') === true) {
                            showText(responseElm, result.message, 'green');
                            
                            if (typeof successCallback === "function") {
                                successCallback();
                            }
                        }
                        else if (result.hasOwnProperty('error') === true) {
                            showText(responseElm, result.error, 'red');
                        }
                    }
                    else if ((data.hasOwnProperty('Error') === true) && (data.Error)) {
                        var error = data.Error;
                        if (error.hasOwnProperty('Message') === true) {
                            showText(responseElm, error.Message, 'red');
                        }
                    }
                },
                function (data) {
                    if ((data.hasOwnProperty('Error') === true) && (data.Error)) {
                        var result = data.Error;
                        if (result.hasOwnProperty('Message') === true) {
                            showText(responseElm, result.Message, 'red');
                        }
                    }
                    else if (data.hasOwnProperty('Result') === true) {
                        var result = data.Result;
                        if (result.hasOwnProperty('error') === true) {
                            showText(responseElm, result.error, 'red');
                        }
                    }
                }
            );
        }
    }

    function flyUnSetAppSecret(progressElmId, responseElmId, authTokenVal, appNameVal, appSecretVal, actionBtnElmId, successCallback) {

        var id = window.ajaxid++;
        var responseElm = getElm(responseElmId);
        var responseContainerElmId = responseElmId + "Container";
        responseElm.textContent = '';
        hideElm(responseContainerElmId);
        var valid = true;

        if (valid == true) {
            if (appNameVal.trim().length === 0) {
                showText(responseElm, 'Enter App Name', 'red');
                valid = false;
            }
        }

        if (valid == true) {
            if (appSecretVal.trim().length === 0) {
                showText(responseElm, 'Enter App Secret', 'red');
                valid = false;
            }
        }

        if (valid === true) {

            let url = '/AppApi/FlyApi';
            let urlMethod = 'POST';
            let urlContent = {
                "jsonrpc": '2.0', "method": 'UnSetAppSecret', "params": {
                    "fly_api_token": authTokenVal,
                    "app_name": appNameVal,
                    "app_secret": appSecretVal
                }, "id": id
            };

            dopost(progressElmId, responseElmId, url, urlContent,
                function (data) {
                    if (data.hasOwnProperty('Result') === true) {
                        var result = data.Result;

                        if (result.hasOwnProperty('message') === true) {
                            showText(responseElm, result.message, 'green');

                            if (typeof successCallback === "function") {
                                successCallback();
                            }
                        }
                        else if (result.hasOwnProperty('error') === true) {
                            showText(responseElm, result.error, 'red');
                        }
                    }
                    else if ((data.hasOwnProperty('Error') === true) && (data.Error)) {
                        var error = data.Error;
                        if (error.hasOwnProperty('Message') === true) {
                            showText(responseElm, error.Message, 'red');
                        }
                    }
                },
                function (data) {
                    if ((data.hasOwnProperty('Error') === true) && (data.Error)) {
                        var result = data.Error;
                        if (result.hasOwnProperty('Message') === true) {
                            showText(responseElm, result.Message, 'red');
                        }
                    }
                    else if (data.hasOwnProperty('Result') === true) {
                        var result = data.Result;
                        if (result.hasOwnProperty('error') === true) {
                            showText(responseElm, result.error, 'red');
                        }
                    }
                }
            );
        }
    }

    function flyListAppSecret(progressElmId, responseElmId, authTokenVal, appNameVal, targetElmId, actionBtnElmId, successCallback) {

        var id = window.ajaxid++;
        var responseElm = getElm(responseElmId);
        var responseContainerElmId = responseElmId + "Container";
        responseElm.textContent = '';
        hideElm(responseContainerElmId);
        var valid = true;

        if (valid == true) {
            if (appNameVal.trim().length === 0) {
                showText(responseElm, 'Enter App Name', 'red');
                valid = false;
            }
        }

        if (valid === true) {

            let url = '/AppApi/FlyApi';
            let urlMethod = 'POST';
            let urlContent = {
                "jsonrpc": '2.0', "method": 'ListAppSecret', "params": {
                    "fly_api_token": authTokenVal,
                    "app_name": appNameVal
                }, "id": id
            };

            dopost(progressElmId, responseElmId, url, urlContent,
                function (data) {
                    if (data.hasOwnProperty('Result') === true) {
                        var result = data.Result;

                        if (result.hasOwnProperty('message') === true) {
                            showText(responseElm, result.message, 'green');

                            if (result.hasOwnProperty("jsonArray") == true) {
                                var data = result.jsonArray;

                                var listDiv = document.getElementById(targetElmId);
                                listDiv.innerHTML = '';
                                var ul = document.createElement('ul');
                                ul.style = 'list-style:none;';
                                for (var i = 0; i < data.length; ++i) {
                                    var li = document.createElement('li');
                                    li.innerHTML = data[i];   // Use innerHTML to set the text
                                    ul.appendChild(li);
                                }
                                listDiv.appendChild(ul);
                            }
                            if (typeof successCallback === "function") {
                                successCallback();
                            }
                        }
                        else if (result.hasOwnProperty('error') === true) {
                            showText(responseElm, result.error, 'red');
                        }
                    }
                    else if ((data.hasOwnProperty('Error') === true) && (data.Error)) {
                        var error = data.Error;
                        if (error.hasOwnProperty('Message') === true) {
                            showText(responseElm, error.Message, 'red');
                        }
                    }
                },
                function (data) {
                    if ((data.hasOwnProperty('Error') === true) && (data.Error)) {
                        var result = data.Error;
                        if (result.hasOwnProperty('Message') === true) {
                            showText(responseElm, result.Message, 'red');
                        }
                    }
                    else if (data.hasOwnProperty('Result') === true) {
                        var result = data.Result;
                        if (result.hasOwnProperty('error') === true) {
                            showText(responseElm, result.error, 'red');
                        }
                    }
                }
            );
        }
    }

</script>
<div class="flex-card card_border">

    <div class="flex-content-wrap" style="margin: 5px 5px;width:100%;min-height:0px;"
         onclick="toggleElm('manageFlyApps'); toggleElm('flyAppOpen'); toggleElm('flyAppClose');">
        <div class="flex-item-stretch" style="text-align:center;">
            <strong>Create Fly Apps/Allocate IP</strong>
        </div>
        <svg xmlns="http://www.w3.org/2000/svg" id="flyAppOpen" style="width:16px;height:16px;margin:0 10px 0 0;" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M19 13l-7 7-7-7m14-8l-7 7-7-7" />
        </svg>
        <svg xmlns="http://www.w3.org/2000/svg" id="flyAppClose" style="width:16px;height:16px;margin:0 10px 0 0;display:none;" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 11l7-7 7 7M5 19l7-7 7 7" />
        </svg>
    </div>

    <div id="manageFlyApps" style="display:none;">

        <div class="flex-content-wrap">
            <label style="width:100%;margin: 5px auto;">Fly App Name</label>
            <div class="flex-item-stretch border-left" style="height: 40px;">
                <input style="width:100%;border:none;" id="flyAppName" type="text" placeholder="Fly App Name" value="" onfocus="this.select();" />
            </div>
            <button class="border-top-bottom" style="width:100px;height:40px;background-color:lightgray;display:none;" id="appInfoResetButton"
                    onclick="resetAppInfo('flyDNSAppSelect', 'flyAppName', 'flyAppIP4Address', 'flyAppIP6Address', 'flyCreateAppBtn', 'flyAllocateAppIPBtn', 'flyReleaseAppIPBtn', 'flyDeleteAppBtn');">
                Reset App
            </button>
            <button class="border-right" style="width: 100px; height: 40px; background-color: lightgray; color: black; font-weight: bolder;" id="getAppInfo"
                    onclick=" triggerEvent('appInfoResetButton', 'click'); flyGetAppInfo('flyAppInfoProgress', 'flyAppResponse', getElm('flyAuthToken').value, getElm('flyAppName').value, 'flyAppName', 'flyOrgSlug', 'flyCreateAppBtn', 'flyAllocateAppIPBtn', 'flyReleaseAppIPBtn', 'flyDeleteAppBtn', function () { })">
                Get Info<div id="flyAppInfoProgress"></div>
            </button>
        </div>

        <div class="flex-content-wrap">
            <label style="width:100%;margin: 5px auto;">Fly App Network</label>
            <div class="flex-item-stretch border" style="height: 40px;">
                <input style="width:100%;border:none;" id="flyAppNetwork" type="text" placeholder="Optional Fly App Private Network" value="" />
            </div>
        </div>

        <div class="flex-content-wrap">
            <label style="width:100%;margin: 5px auto;">App IP4 Address</label>
            <div class="flex-item-stretch border-left" style="height: 40px;">
                <input readonly style="width:100%;border:none;" id="flyAppIP4Address" type="text" placeholder="App IP4 Address" value="" />
            </div>
            <button class="border-top-bottom" style="width:100px;height:40px;background-color:lightgray;display:none;" id="appIPInfoResetButton"
                    onclick="resetAppIPInfo('flyDNSAppSelect', 'flyAppName', 'flyAppIP4Address', 'flyAppIP6Address', 'flyCreateAppBtn', 'flyAllocateAppIPBtn', 'flyReleaseAppIPBtn', 'flyDeleteAppBtn');">
                Reset IP App
            </button>
            <button class="border-right" style="width: 100px; height: 40px; background-color: lightgray; color: black; font-weight: bolder;" id="getAppIPInfo"
                    onclick="triggerEvent('appIPInfoResetButton', 'click'); flyGetAppIPInfo('flyAppIPInfoProgress', 'flyAppResponse', getElm('flyAuthToken').value, getElm('flyAppName').value, 'flyAppIP4Address', 'flyAppIP6Address', 'flyCreateAppBtn', 'flyAllocateAppIPBtn', 'flyReleaseAppIPBtn', 'flyDeleteAppBtn', function () {   })">
                Get IP Info<div id="flyAppIPInfoProgress"></div>
            </button>
        </div>

        <div class="notification is-marginless" id="flyAppResponseContainer" style="display:none;">
            <button class="delete" onclick="hideElm('flyAppResponseContainer');"></button>
            <div id="flyAppResponse"></div>
        </div>

        <div class="flex-content-wrap" style="margin: 5px 0px;text-align:center;">
            <label style="color:red;font-size:x-small">Get IP Info for the Allocate/Release Button to get enabled/disabled based on IPv4 or IPv6 exists</label>
        </div>

        <div class="flex-content-wrap">
            <label style="width:100%;margin: 5px auto;">App IP6 Address</label>
            <div class="flex-item-stretch border" style="height: 40px;">
                <input readonly style="width:100%;border:none;" id="flyAppIP6Address" type="text" placeholder="App IP6 Address" value="" />
            </div>
        </div>

        <div style="text-align:center;margin-top:10px">
            <input readonly type="checkbox" id="allocateIP6" name="allocateIP6" title="Allocate IP6">
            <label for="allocateIP6" style="padding:7px 0px 0 0px;">
                Allocate/Release IP6 Address
            </label>
        </div>

        <div class="flex-content-wrap" style="width:100%;text-align: center;margin: 10px 0px;">
            <button class="border" style="margin: 0 5px 5px 0; width: 100px; height: 40px; background-color: lightgray; color: black; font-weight: bolder;"
                    id="flyCreateAppBtn"
                    onclick="flyCreateApp('flyCreateAppProgress', 'flyAppResponse', getElm('flyAuthToken').value, getElm('flyOrgSlug').value, getElm('flyAppName').value, getElm('flyAppNetwork').value, function () { })">
                Create App <div id="flyCreateAppProgress"></div>
            </button>
            <button class="border" style="margin: 0 5px 5px 0; min-width: 100px; height: 40px; background-color: lightgray; color: black; font-weight: bolder;"
                    id="flyAllocateAppIPBtn" disabled="disabled"
                    onclick="flyAllocateAppIP('flyAppAllocateIPProgress', 'flyAppResponse', getElm('flyAuthToken').value, getElm('flyAppName').value, getElm('flyAppIP4Address').value, getElm('flyAppIP6Address').value, getElm('allocateIP6').checked, function () { triggerEvent('getAppIPInfo', 'click'); })">
                Allocate IP <div id="flyAppAllocateIPProgress"></div>
            </button>
            <button class="border" style="margin: 0 5px 5px 0; min-width: 100px; height: 40px; background-color: lightgray; color: black; font-weight: bolder;"
                    id="flyReleaseAppIPBtn" disabled="disabled"
                    onclick="flyReleaseAppIP('flyAppReleaseIPProgress', 'flyAppResponse', getElm('flyAuthToken').value, getElm('flyAppName').value, getElm('flyAppIP4Address').value, getElm('flyAppIP6Address').value, getElm('allocateIP6').checked, function () { triggerEvent('getAppIPInfo', 'click'); })">
                Release IP <div id="flyAppReleaseIPProgress"></div>
            </button>
            <button class="border" style="min-width: 100px; height: 40px; background-color: lightgray; color: red; font-weight: bolder; "
                    id="flyDeleteAppBtn" disabled="disabled"
                    onclick="flyDeleteApp('flyAppDeleteProgress', 'flyAppResponse', getElm('flyAuthToken').value, getElm('flyAppName').value, function () {  })">
                Delete App <div id="flyAppDeleteProgress"></div>
            </button>
        </div>

        <div class="flex-content-wrap">
            <label style="width:100%;margin: 5px auto;">Set/UnSet App Secret</label>
            <button class="border-left" style="width: 70px; height: 40px; background-color: lightgray; color: black; font-weight: bolder;" id="flyUnSetSecretBtn"
                    onclick="flyUnSetAppSecret('flyAppUnSetSecretProgress', 'flySecretResponse', getElm('flyAuthToken').value, getElm('flyAppName').value, getElm('flyAppSecret').value, 'flyUnSetSecretBtn', function () {   })">
                UnSet<div id="flyAppUnSetSecretProgress"></div>
            </button>
            <div class="flex-item-stretch border-top-bottom" style="height: 40px;">
                <input style="width:100%;border:none;" id="flyAppSecret" type="text" placeholder="Name = Value Name = Value" value="" />
            </div>
            <button class="border-right" style="width: 100px; height: 40px; background-color: lightgray; color: black; font-weight: bolder;" id="flyAppSetSecretBtn"
                    onclick="flySetAppSecret('flyAppSetSecretProgress', 'flySecretResponse', getElm('flyAuthToken').value, getElm('flyAppName').value, getElm('flyAppSecret').value, 'flyAppSetSecretBtn', function () {   })">
                Set Secret<div id="flyAppSetSecretProgress"></div>
            </button>
        </div>

        <div class="notification is-marginless" id="flySecretResponseContainer" style="display:none;">
            <button class="delete" onclick="hideElm('flySecretResponseContainer');"></button>
            <div id="flySecretResponse"></div>
        </div>

        <div class="flex-content-wrap" style="width:100%;text-align: center;margin: 10px 0px;">
            <button class="border" style="margin: 0 5px 5px 0; min-width: 100px; height: 40px; background-color: lightgray; color: black; font-weight: bolder;" id="flyAppListSecretBtn"
                    onclick="flyListAppSecret('flyAppListSecretProgress', 'flySecretResponse', getElm('flyAuthToken').value, getElm('flyAppName').value, 'appSecretList', 'flyAppListSecretBtn', function () {  })">
                List Secret <div id="flyAppListSecretProgress"></div>
            </button>
        </div>

        <div id="appSecretList" class="border" style="text-align:center;">

        </div>
    </div>

</div>
